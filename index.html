<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>DizzyGlitch</title>
<style>
html,body{height:100%;margin:0;background:#000;overflow:hidden;font-family:system-ui}
#stage{position:fixed;inset:0}
video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
.fade-in{animation:fi .6s ease-out forwards;opacity:0}
.fade-out{animation:fo .6s ease-in forwards;opacity:1}
@keyframes fi{to{opacity:1}} @keyframes fo{to{opacity:0}}
#overlay{position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.85);color:#fff}
button{background:#fff;color:#000;border:0;border-radius:12px;padding:14px 16px;font-weight:700}
#hud{position:fixed;left:12px;right:12px;bottom:12px;display:flex;justify-content:space-between;font-size:12px;color:rgba(255,255,255,.7)}
</style>
</head>
<body>
<div id="stage"></div>

<div id="overlay">
  <button id="start">Tap to Start</button>
</div>

<div id="hud">
  <div>DizzyGlitch</div>
  <div>demo mode</div>
</div>

<script>
const DEMO="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4";
const stage=document.getElementById("stage");
const overlay=document.getElementById("overlay");
let current=null;

function rand(min,max){return Math.random()*(max-min)+min}

function show(){
  const v=document.createElement("video");
  v.src=DEMO;
  v.muted=true;
  v.playsInline=true;
  v.autoplay=true;

  v.addEventListener("loadedmetadata",()=>{
    if(v.duration>3){
      v.currentTime=rand(0,Math.max(0,v.duration-2));
    }
  },{once:true});

  if(current){
    v.classList.add("fade-in");
    current.classList.add("fade-out");
    stage.appendChild(v);
    const old=current;
    current=v;
    setTimeout(()=>old.remove(),700);
  }else{
    stage.appendChild(v);
    current=v;
  }

  setTimeout(show, rand(2500,9000));
}

document.getElementById("start").onclick=()=>{
  overlay.remove();
  show();
};
</script>
</body>
</html>